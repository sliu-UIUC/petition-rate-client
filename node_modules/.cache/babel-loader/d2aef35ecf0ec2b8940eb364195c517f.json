{"ast":null,"code":"import _slicedToArray from\"/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{useHistory}from\"react-router-dom\";import{useEffect,useState}from\"react\";import\"./Signup.css\";import{Avatar,Button,Grow}from\"@material-ui/core\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import Box from\"@material-ui/core/Box\";import Typography from\"@material-ui/core/Typography\";import Container from\"@material-ui/core/Container\";import ResponsiveAppBar from\"./../NavigationBar/ResponsiveAppBar\";var SignUp=function SignUp(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),register=_useState2[0],setRegister=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),ErrMessage=_useState4[0],setErrMessage=_useState4[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var data=new FormData(event.currentTarget);var user={username:data.get(\"email\"),password:data.get(\"password\")};// console.log(user);\nfetch(\"https://petition-rate.herokuapp.com/signup\",{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify(user)}).then(function(res){return res.json();}).then(function(data){localStorage.setItem(\"token\",data.token);var isSignedUp=data.isSignedUp;setRegister(isSignedUp);setErrMessage(data.message);if(isSignedUp){history.push(\"/signin\");}});};useEffect(function(){fetch(\"https://petition-rate.herokuapp.com/isUserAuth\",{headers:{\"x-access-token\":localStorage.getItem(\"token\")}}).then(function(res){return res.json();}).then(function(data){return data.isLoggedIn?history.push(\"/home\"):null;}).catch(function(err){return console.log(err);});},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ResponsiveAppBar,null),/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\",style:{\"margin-top\":\"150px\"}},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Box,{sx:{marginTop:8,display:\"flex\",flexDirection:\"column\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(Avatar,{sx:{m:1,bgcolor:\"secondary.main\"}}),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Sign Up\"),/*#__PURE__*/React.createElement(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,sx:{mt:1}},/*#__PURE__*/React.createElement(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Username\",name:\"email\",autoComplete:\"email\",autoFocus:true}),/*#__PURE__*/React.createElement(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2}},\"Create the account\"),register?/*#__PURE__*/React.createElement(\"p\",{className:\"success_message\"},\"You Are Registered Successfully\"):ErrMessage?/*#__PURE__*/React.createElement(\"p\",{className:\"err_message\"},\"Username has been taken!\"):/*#__PURE__*/React.createElement(\"p\",{className:\"normal_message\"},\"Please Register\"))))));};export default SignUp;","map":{"version":3,"sources":["/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/src/components/SignUp/Signup.js"],"names":["React","useHistory","useEffect","useState","Avatar","Button","Grow","CssBaseline","TextField","Box","Typography","Container","ResponsiveAppBar","SignUp","history","register","setRegister","ErrMessage","setErrMessage","handleSubmit","event","preventDefault","data","FormData","currentTarget","user","username","get","password","fetch","method","headers","body","JSON","stringify","then","res","json","localStorage","setItem","token","isSignedUp","message","push","getItem","isLoggedIn","catch","err","console","log","marginTop","display","flexDirection","alignItems","m","bgcolor","mt","mb"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useEffect, useState} from \"react\";\r\nimport \"./Signup.css\"\r\nimport { Avatar, Button, Grow } from \"@material-ui/core\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport ResponsiveAppBar from \"./../NavigationBar/ResponsiveAppBar\";\r\n\r\nconst SignUp = () => {\r\n  const history = useHistory();\r\n  const [register, setRegister] = useState(false);\r\n  const [ErrMessage, setErrMessage] = useState(\"\");\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const data = new FormData(event.currentTarget);\r\n    const user = {\r\n      username: data.get(\"email\"),\r\n      password: data.get(\"password\"),\r\n    };\r\n\r\n    // console.log(user);\r\n\r\n    fetch(\"https://petition-rate.herokuapp.com/signup\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(user),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        localStorage.setItem(\"token\", data.token);\r\n        const isSignedUp = data.isSignedUp;\r\n        setRegister(isSignedUp);\r\n        setErrMessage(data.message);\r\n        if (isSignedUp) {\r\n          history.push(\"/signin\");\r\n        }\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://petition-rate.herokuapp.com/isUserAuth\", {\r\n      headers: {\r\n        \"x-access-token\": localStorage.getItem(\"token\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => (data.isLoggedIn ? history.push(\"/home\") : null))\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <ResponsiveAppBar />\r\n      <Grow in>\r\n        <Container\r\n          component=\"main\"\r\n          maxWidth=\"xs\"\r\n          style={{ \"margin-top\": \"150px\" }}\r\n        >\r\n          <CssBaseline />\r\n          <Box\r\n            sx={{\r\n              marginTop: 8,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}></Avatar>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Sign Up\r\n            </Typography>\r\n            <Box\r\n              component=\"form\"\r\n              onSubmit={handleSubmit}\r\n              noValidate\r\n              sx={{ mt: 1 }}\r\n            >\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Username\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n              />\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n              />\r\n              \r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n              >\r\n                Create the account\r\n              </Button>\r\n              {register ? (\r\n                <p className=\"success_message\">You Are Registered Successfully</p>\r\n              ) : ErrMessage ? (\r\n                <p className=\"err_message\">Username has been taken!</p>\r\n              ) : <p className=\"normal_message\">Please Register</p>\r\n            }\r\n            </Box>\r\n          </Box>\r\n        </Container>\r\n      </Grow>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n"]},"metadata":{},"sourceType":"module"}