{"ast":null,"code":"import { useHistory } from \"react-router-dom\";\nconst history = useHistory();\n\nconst verifyToken = () => {\n  async function verifyAndLoggingIn() {\n    try {\n      const res = await fetch(\"http://localhost:5000/isUserAuth\", {\n        headers: {\n          \"x-access-token\": localStorage.getItem(\"token\")\n        }\n      });\n      const data = await res.json();\n\n      if (data.isLoggedIn) {\n        history.push(\"/\");\n      }\n    } catch (err) {\n      console.log(\"Error in verifying user\");\n    }\n  }\n\n  verifyAndLoggingIn();\n};\n\nexport default verifyToken;","map":{"version":3,"sources":["/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/src/api/verifyAndLoggingIn.js"],"names":["useHistory","history","verifyToken","verifyAndLoggingIn","res","fetch","headers","localStorage","getItem","data","json","isLoggedIn","push","err","console","log"],"mappings":"AAAA,SAASA,UAAT,QAA2B,kBAA3B;AAEA,MAAMC,OAAO,GAAGD,UAAU,EAA1B;;AAEA,MAAME,WAAW,GAAG,MAAM;AACxB,iBAAeC,kBAAf,GAAoC;AAClC,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,kCAAD,EAAqC;AAC1DC,QAAAA,OAAO,EAAE;AACP,4BAAkBC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADX;AADiD,OAArC,CAAvB;AAMA,YAAMC,IAAI,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAnB;;AACA,UAAID,IAAI,CAACE,UAAT,EAAqB;AACnBV,QAAAA,OAAO,CAACW,IAAR,CAAa,GAAb;AACD;AACF,KAXD,CAWE,OAAOC,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AACF;;AACDZ,EAAAA,kBAAkB;AACnB,CAlBD;;AAoBA,eAAeD,WAAf","sourcesContent":["import { useHistory } from \"react-router-dom\";\n\nconst history = useHistory();\n\nconst verifyToken = () => {\n  async function verifyAndLoggingIn() {\n    try {\n      const res = await fetch(\"http://localhost:5000/isUserAuth\", {\n        headers: {\n          \"x-access-token\": localStorage.getItem(\"token\"),\n        },\n      });\n\n      const data = await res.json();\n      if (data.isLoggedIn) {\n        history.push(\"/\");\n      }\n    } catch (err) {\n      console.log(\"Error in verifying user\");\n    }\n  }\n  verifyAndLoggingIn();\n};\n\nexport default verifyToken;\n"]},"metadata":{},"sourceType":"module"}