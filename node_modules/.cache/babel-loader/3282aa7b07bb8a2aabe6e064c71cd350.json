{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,IconButton,Typography,Menu,Avatar,Button,Tooltip,MenuItem}from\"@material-ui/core\";import Fab from'@material-ui/core/Fab';import AddIcon from'@material-ui/icons/Add';import{useHistory}from\"react-router-dom\";import\"./ResponsiveAppBar.css\";var ResponsiveAppBar=function ResponsiveAppBar(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorElNav=_React$useState2[0],setAnchorElNav=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),anchorElUser=_React$useState4[0],setAnchorElUser=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isLoggedIn=_React$useState6[0],setIsLoggedIn=_React$useState6[1];var userid=localStorage.getItem(\"userid\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];function verifyAndLoggingIn(){return _verifyAndLoggingIn.apply(this,arguments);}function _verifyAndLoggingIn(){_verifyAndLoggingIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://petition-rate.herokuapp.com/isUserAuth\",{headers:{\"x-access-token\":localStorage.getItem(\"token\")}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;setIsLoggedIn(data.isLoggedIn);setUserName(data.username);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"Error in verifying user\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _verifyAndLoggingIn.apply(this,arguments);}var history=useHistory();var routeChangetoHome=function routeChangetoHome(){history.push(\"/home\");};var routeChangeToCreate=function routeChangeToCreate(){history.push(\"/add\");};var routeChangetoMyHome=function routeChangetoMyHome(){history.push(\"/myhome\");};var routeChangetoLogin=function routeChangetoLogin(){history.push(\"/signin\");};var routeChangeToAbout=function routeChangeToAbout(){history.push(\"/\");};var routeChangeToSignIn=function routeChangeToSignIn(){localStorage.removeItem(\"token\");history.push(\"/signin\");};var routeChangeToSignUp=function routeChangeToSignUp(){history.push(\"/signup\");};var handleOpenUserMenu=function handleOpenUserMenu(event){setAnchorElUser(event.currentTarget);};var handleCloseUserMenu=function handleCloseUserMenu(){setAnchorElUser(null);};useEffect(function(){verifyAndLoggingIn();},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AppBar,{position:\"fixed\"},/*#__PURE__*/React.createElement(\"div\",{className:\"nav_bar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"nav_left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"nav_title\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\"},\"PetitionRate\")),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",className:\"nav_btn\",onClick:routeChangeToAbout},\"About\"),isLoggedIn?/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",className:\"nav_btn\",onClick:routeChangetoHome},\"Home\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"nav_profile\"},isLoggedIn?/*#__PURE__*/React.createElement(Tooltip,{title:\"Create Petition\"},/*#__PURE__*/React.createElement(Button,{size:\"big\",onClick:routeChangeToCreate},/*#__PURE__*/React.createElement(Fab,{variant:\"extended\",color:\"primary\",\"aria-label\":\"add\"},/*#__PURE__*/React.createElement(AddIcon,null),\"Create a Petition\"))):null,/*#__PURE__*/React.createElement(Tooltip,{title:\"Open Profile\"},/*#__PURE__*/React.createElement(IconButton,{onClick:handleOpenUserMenu,sx:{p:0}},/*#__PURE__*/React.createElement(Avatar,{src:\"/broken-image.jpg\"}))),isLoggedIn?/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",style:{color:\"white\"}},userName):null),/*#__PURE__*/React.createElement(Menu,{sx:{mt:\"45px\"},id:\"menu-appbar\",anchorEl:anchorElUser,anchorOrigin:{vertical:\"top\",horizontal:\"right\"},keepMounted:true,transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:Boolean(anchorElUser),onClose:handleCloseUserMenu},isLoggedIn?/*#__PURE__*/React.createElement(MenuItem,{key:\"My Home\",onClick:routeChangetoMyHome},/*#__PURE__*/React.createElement(Typography,{textAlign:\"center\"},\"My Home\")):null,isLoggedIn?null:/*#__PURE__*/React.createElement(MenuItem,{key:\"Sign In\",onClick:routeChangetoLogin},/*#__PURE__*/React.createElement(Typography,{textAlign:\"center\"},\"Sign In\")),isLoggedIn?/*#__PURE__*/React.createElement(MenuItem,{key:\"Sign Out\",onClick:routeChangeToSignIn},/*#__PURE__*/React.createElement(Typography,{textAlign:\"center\"},\"Sign Out\")):null,isLoggedIn?null:/*#__PURE__*/React.createElement(MenuItem,{key:\"Sign Up\",onClick:routeChangeToSignUp},/*#__PURE__*/React.createElement(Typography,{textAlign:\"center\"},\"Sign Up\"))))));};export default ResponsiveAppBar;","map":{"version":3,"sources":["/Users/lebronjames/Desktop/F21 Courses/Web Dev/TeamToffee/client/src/components/NavigationBar/ResponsiveAppBar.js"],"names":["React","useState","useEffect","AppBar","IconButton","Typography","Menu","Avatar","Button","Tooltip","MenuItem","Fab","AddIcon","useHistory","ResponsiveAppBar","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","isLoggedIn","setIsLoggedIn","userid","localStorage","getItem","userName","setUserName","verifyAndLoggingIn","fetch","headers","res","json","data","username","console","log","history","routeChangetoHome","push","routeChangeToCreate","routeChangetoMyHome","routeChangetoLogin","routeChangeToAbout","routeChangeToSignIn","removeItem","routeChangeToSignUp","handleOpenUserMenu","event","currentTarget","handleCloseUserMenu","p","color","mt","vertical","horizontal","Boolean"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  AppBar,\n  IconButton,\n  Typography,\n  Menu,\n  Avatar,\n  Button,\n  Tooltip,\n  MenuItem,\n} from \"@material-ui/core\";\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { useHistory } from \"react-router-dom\";\nimport \"./ResponsiveAppBar.css\";\n\nconst ResponsiveAppBar = () => {\n  const [anchorElNav, setAnchorElNav] = React.useState(null);\n  const [anchorElUser, setAnchorElUser] = React.useState(null);\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const userid = localStorage.getItem(\"userid\");\n  const [userName, setUserName] = useState(\"\");\n  async function verifyAndLoggingIn() {\n    try {\n      const res = await fetch(\"https://petition-rate.herokuapp.com/isUserAuth\", {\n        headers: {\n          \"x-access-token\": localStorage.getItem(\"token\"),\n        },\n      });\n\n      const data = await res.json();\n      setIsLoggedIn(data.isLoggedIn);\n      setUserName(data.username);\n\n    } catch (err) {\n      console.log(\"Error in verifying user\");\n    }\n  }\n\n  const history = useHistory();\n  const routeChangetoHome = () => {\n    history.push(\"/home\");\n  };\n\n  const routeChangeToCreate = () => {\n    history.push(\"/add\");\n  };\n\n  const routeChangetoMyHome = () => {\n    history.push(\"/myhome\");\n  };\n\n  const routeChangetoLogin = () => {\n    history.push(\"/signin\");\n  };\n\n  const routeChangeToAbout = () => {\n    history.push(\"/\");\n  };\n\n  const routeChangeToSignIn = () => {\n    localStorage.removeItem(\"token\");\n    history.push(\"/signin\");\n  };\n\n  const routeChangeToSignUp = () => {\n    history.push(\"/signup\");\n  };\n\n  const handleOpenUserMenu = (event) => {\n    setAnchorElUser(event.currentTarget);\n  };\n\n  const handleCloseUserMenu = () => {\n    setAnchorElUser(null);\n  };\n\n  useEffect(() => {\n    verifyAndLoggingIn();\n  }, []);\n\n  return (\n    <div>\n      <AppBar position=\"fixed\">\n        <div className=\"nav_bar\">\n          <div className=\"nav_left\">\n            <div className=\"nav_title\">\n              <Typography variant=\"h5\">PetitionRate</Typography>\n            </div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"nav_btn\"\n              onClick={routeChangeToAbout}\n            >\n              About\n            </Button>\n            {isLoggedIn ? (\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"nav_btn\"\n              onClick={routeChangetoHome}\n            >\n              Home\n            </Button>):null}\n          </div>\n\n          <div className=\"nav_profile\">\n            {isLoggedIn ? (\n              <Tooltip title=\"Create Petition\">\n                <Button size=\"big\" onClick={routeChangeToCreate}>\n                  <Fab variant=\"extended\" color=\"primary\" aria-label=\"add\" >\n                    <AddIcon />\n                    Create a Petition\n                  </Fab>\n                </Button>\n              </Tooltip>\n            ) : null}\n            <Tooltip title=\"Open Profile\">\n              <IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n                <Avatar src=\"/broken-image.jpg\" />\n              </IconButton>\n            </Tooltip>\n\n            {isLoggedIn ? (\n              <Typography variant=\"body1\"\n              style={{ color: \"white\" }}>{userName}</Typography>\n            ):null}\n          </div>\n          <Menu\n            sx={{ mt: \"45px\" }}\n            id=\"menu-appbar\"\n            anchorEl={anchorElUser}\n            anchorOrigin={{\n              vertical: \"top\",\n              horizontal: \"right\",\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"right\",\n            }}\n            open={Boolean(anchorElUser)}\n            onClose={handleCloseUserMenu}\n          >\n            {isLoggedIn ? (\n              <MenuItem key=\"My Home\" onClick={routeChangetoMyHome}>\n                <Typography textAlign=\"center\">My Home</Typography>\n              </MenuItem>\n            ): null}\n            {isLoggedIn ? null : (\n              <MenuItem key=\"Sign In\" onClick={routeChangetoLogin}>\n                <Typography textAlign=\"center\">Sign In</Typography>\n              </MenuItem>\n            )}\n            {isLoggedIn ? (\n              <MenuItem key=\"Sign Out\" onClick={routeChangeToSignIn}>\n                <Typography textAlign=\"center\">Sign Out</Typography>\n              </MenuItem>\n            ) : null}\n            {isLoggedIn ? null : (\n              <MenuItem key=\"Sign Up\" onClick={routeChangeToSignUp}>\n                <Typography textAlign=\"center\">Sign Up</Typography>\n              </MenuItem>\n            )}\n          </Menu>\n\n\n        </div>\n      </AppBar>\n    </div>\n  );\n};\nexport default ResponsiveAppBar;\n"]},"metadata":{},"sourceType":"module"}